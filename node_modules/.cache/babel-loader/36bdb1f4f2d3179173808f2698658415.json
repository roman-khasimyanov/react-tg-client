{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _classnames5 = _interopRequireDefault(require(\"classnames\"));\n\nvar _debounce = _interopRequireDefault(require(\"lodash/debounce\"));\n\nvar _resizeObserverPolyfill = _interopRequireDefault(require(\"resize-observer-polyfill\"));\n\nvar _utils = require(\"./utils\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar ScrollableTabBarNode = /*#__PURE__*/function (_React$Component) {\n  _inherits(ScrollableTabBarNode, _React$Component);\n\n  function ScrollableTabBarNode(props) {\n    var _this;\n\n    _classCallCheck(this, ScrollableTabBarNode);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ScrollableTabBarNode).call(this, props));\n\n    _this.prevTransitionEnd = function (e) {\n      if (e.propertyName !== 'opacity') {\n        return;\n      }\n\n      var container = _this.props.getRef('container');\n\n      _this.scrollToActiveTab({\n        target: container,\n        currentTarget: container\n      });\n    };\n\n    _this.scrollToActiveTab = function (e) {\n      var activeTab = _this.props.getRef('activeTab');\n\n      var navWrap = _this.props.getRef('navWrap');\n\n      if (e && e.target !== e.currentTarget || !activeTab) {\n        return;\n      } // when not scrollable or enter scrollable first time, don't emit scrolling\n\n\n      var needToSroll = _this.isNextPrevShown() && _this.lastNextPrevShown;\n\n      _this.lastNextPrevShown = _this.isNextPrevShown();\n\n      if (!needToSroll) {\n        return;\n      }\n\n      var activeTabWH = _this.getScrollWH(activeTab);\n\n      var navWrapNodeWH = _this.getOffsetWH(navWrap);\n\n      var _assertThisInitialize = _assertThisInitialized(_this),\n          offset = _assertThisInitialize.offset;\n\n      var wrapOffset = _this.getOffsetLT(navWrap);\n\n      var activeTabOffset = _this.getOffsetLT(activeTab);\n\n      if (wrapOffset > activeTabOffset) {\n        offset += wrapOffset - activeTabOffset;\n\n        _this.setOffset(offset);\n      } else if (wrapOffset + navWrapNodeWH < activeTabOffset + activeTabWH) {\n        offset -= activeTabOffset + activeTabWH - (wrapOffset + navWrapNodeWH);\n\n        _this.setOffset(offset);\n      }\n    };\n\n    _this.prev = function (e) {\n      _this.props.onPrevClick(e);\n\n      var navWrapNode = _this.props.getRef('navWrap');\n\n      var navWrapNodeWH = _this.getOffsetWH(navWrapNode);\n\n      var _assertThisInitialize2 = _assertThisInitialized(_this),\n          offset = _assertThisInitialize2.offset;\n\n      _this.setOffset(offset + navWrapNodeWH);\n    };\n\n    _this.next = function (e) {\n      _this.props.onNextClick(e);\n\n      var navWrapNode = _this.props.getRef('navWrap');\n\n      var navWrapNodeWH = _this.getOffsetWH(navWrapNode);\n\n      var _assertThisInitialize3 = _assertThisInitialized(_this),\n          offset = _assertThisInitialize3.offset;\n\n      _this.setOffset(offset - navWrapNodeWH);\n    };\n\n    _this.offset = 0;\n    _this.state = {\n      next: false,\n      prev: false\n    };\n    return _this;\n  }\n\n  _createClass(ScrollableTabBarNode, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.componentDidUpdate();\n      this.debouncedResize = (0, _debounce.default)(function () {\n        _this2.setNextPrev();\n\n        _this2.scrollToActiveTab();\n      }, 200);\n      this.resizeObserver = new _resizeObserverPolyfill.default(this.debouncedResize);\n      this.resizeObserver.observe(this.props.getRef('container'));\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var props = this.props;\n\n      if (prevProps && prevProps.tabBarPosition !== props.tabBarPosition) {\n        this.setOffset(0);\n        return;\n      }\n\n      var nextPrev = this.setNextPrev(); // wait next, prev show hide\n\n      /* eslint react/no-did-update-set-state:0 */\n\n      if (this.isNextPrevShown(this.state) !== this.isNextPrevShown(nextPrev)) {\n        this.setState({}, this.scrollToActiveTab);\n      } else if (!prevProps || props.activeKey !== prevProps.activeKey) {\n        // can not use props.activeKey\n        this.scrollToActiveTab();\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.resizeObserver) {\n        this.resizeObserver.disconnect();\n      }\n\n      if (this.debouncedResize && this.debouncedResize.cancel) {\n        this.debouncedResize.cancel();\n      }\n    }\n  }, {\n    key: \"setNextPrev\",\n    value: function setNextPrev() {\n      var navNode = this.props.getRef('nav');\n      var navTabsContainer = this.props.getRef('navTabsContainer');\n      var navNodeWH = this.getScrollWH(navTabsContainer || navNode); // Add 1px to fix `offsetWidth` with decimal in Chrome not correct handle\n      // https://github.com/ant-design/ant-design/issues/13423\n\n      var containerWH = this.getOffsetWH(this.props.getRef('container')) + 1;\n      var navWrapNodeWH = this.getOffsetWH(this.props.getRef('navWrap'));\n      var offset = this.offset;\n      var minOffset = containerWH - navNodeWH;\n      var _this$state = this.state,\n          next = _this$state.next,\n          prev = _this$state.prev;\n\n      if (minOffset >= 0) {\n        next = false;\n        this.setOffset(0, false);\n        offset = 0;\n      } else if (minOffset < offset) {\n        next = true;\n      } else {\n        next = false; // Fix https://github.com/ant-design/ant-design/issues/8861\n        // Test with container offset which is stable\n        // and set the offset of the nav wrap node\n\n        var realOffset = navWrapNodeWH - navNodeWH;\n        this.setOffset(realOffset, false);\n        offset = realOffset;\n      }\n\n      if (offset < 0) {\n        prev = true;\n      } else {\n        prev = false;\n      }\n\n      this.setNext(next);\n      this.setPrev(prev);\n      return {\n        next: next,\n        prev: prev\n      };\n    }\n  }, {\n    key: \"getOffsetWH\",\n    value: function getOffsetWH(node) {\n      var tabBarPosition = this.props.tabBarPosition;\n      var prop = 'offsetWidth';\n\n      if (tabBarPosition === 'left' || tabBarPosition === 'right') {\n        prop = 'offsetHeight';\n      }\n\n      return node[prop];\n    }\n  }, {\n    key: \"getScrollWH\",\n    value: function getScrollWH(node) {\n      var tabBarPosition = this.props.tabBarPosition;\n      var prop = 'scrollWidth';\n\n      if (tabBarPosition === 'left' || tabBarPosition === 'right') {\n        prop = 'scrollHeight';\n      }\n\n      return node[prop];\n    }\n  }, {\n    key: \"getOffsetLT\",\n    value: function getOffsetLT(node) {\n      var tabBarPosition = this.props.tabBarPosition;\n      var prop = 'left';\n\n      if (tabBarPosition === 'left' || tabBarPosition === 'right') {\n        prop = 'top';\n      }\n\n      return node.getBoundingClientRect()[prop];\n    }\n  }, {\n    key: \"setOffset\",\n    value: function setOffset(offset) {\n      var checkNextPrev = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var target = Math.min(0, offset);\n\n      if (this.offset !== target) {\n        this.offset = target;\n        var navOffset = {};\n        var tabBarPosition = this.props.tabBarPosition;\n        var navStyle = this.props.getRef('nav').style;\n        var transformSupported = (0, _utils.isTransform3dSupported)(navStyle);\n\n        if (tabBarPosition === 'left' || tabBarPosition === 'right') {\n          if (transformSupported) {\n            navOffset = {\n              value: \"translate3d(0,\".concat(target, \"px,0)\")\n            };\n          } else {\n            navOffset = {\n              name: 'top',\n              value: \"\".concat(target, \"px\")\n            };\n          }\n        } else if (transformSupported) {\n          if (this.props.direction === 'rtl') {\n            target = -target;\n          }\n\n          navOffset = {\n            value: \"translate3d(\".concat(target, \"px,0,0)\")\n          };\n        } else {\n          navOffset = {\n            name: 'left',\n            value: \"\".concat(target, \"px\")\n          };\n        }\n\n        if (transformSupported) {\n          (0, _utils.setTransform)(navStyle, navOffset.value);\n        } else {\n          navStyle[navOffset.name] = navOffset.value;\n        }\n\n        if (checkNextPrev) {\n          this.setNextPrev();\n        }\n      }\n    }\n  }, {\n    key: \"setPrev\",\n    value: function setPrev(v) {\n      if (this.state.prev !== v) {\n        this.setState({\n          prev: v\n        });\n      }\n    }\n  }, {\n    key: \"setNext\",\n    value: function setNext(v) {\n      if (this.state.next !== v) {\n        this.setState({\n          next: v\n        });\n      }\n    }\n  }, {\n    key: \"isNextPrevShown\",\n    value: function isNextPrevShown(state) {\n      if (state) {\n        return state.next || state.prev;\n      }\n\n      return this.state.next || this.state.prev;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _classnames, _classnames2, _classnames3, _classnames4;\n\n      var _this$state2 = this.state,\n          next = _this$state2.next,\n          prev = _this$state2.prev;\n      var _this$props = this.props,\n          prefixCls = _this$props.prefixCls,\n          scrollAnimated = _this$props.scrollAnimated,\n          navWrapper = _this$props.navWrapper,\n          prevIcon = _this$props.prevIcon,\n          nextIcon = _this$props.nextIcon;\n      var showNextPrev = prev || next;\n\n      var prevButton = _react.default.createElement(\"span\", {\n        onClick: prev ? this.prev : null,\n        unselectable: \"unselectable\",\n        className: (0, _classnames5.default)((_classnames = {}, _defineProperty(_classnames, \"\".concat(prefixCls, \"-tab-prev\"), 1), _defineProperty(_classnames, \"\".concat(prefixCls, \"-tab-btn-disabled\"), !prev), _defineProperty(_classnames, \"\".concat(prefixCls, \"-tab-arrow-show\"), showNextPrev), _classnames)),\n        onTransitionEnd: this.prevTransitionEnd\n      }, prevIcon || _react.default.createElement(\"span\", {\n        className: \"\".concat(prefixCls, \"-tab-prev-icon\")\n      }));\n\n      var nextButton = _react.default.createElement(\"span\", {\n        onClick: next ? this.next : null,\n        unselectable: \"unselectable\",\n        className: (0, _classnames5.default)((_classnames2 = {}, _defineProperty(_classnames2, \"\".concat(prefixCls, \"-tab-next\"), 1), _defineProperty(_classnames2, \"\".concat(prefixCls, \"-tab-btn-disabled\"), !next), _defineProperty(_classnames2, \"\".concat(prefixCls, \"-tab-arrow-show\"), showNextPrev), _classnames2))\n      }, nextIcon || _react.default.createElement(\"span\", {\n        className: \"\".concat(prefixCls, \"-tab-next-icon\")\n      }));\n\n      var navClassName = \"\".concat(prefixCls, \"-nav\");\n      var navClasses = (0, _classnames5.default)((_classnames3 = {}, _defineProperty(_classnames3, navClassName, true), _defineProperty(_classnames3, scrollAnimated ? \"\".concat(navClassName, \"-animated\") : \"\".concat(navClassName, \"-no-animated\"), true), _classnames3));\n      return _react.default.createElement(\"div\", {\n        className: (0, _classnames5.default)((_classnames4 = {}, _defineProperty(_classnames4, \"\".concat(prefixCls, \"-nav-container\"), 1), _defineProperty(_classnames4, \"\".concat(prefixCls, \"-nav-container-scrolling\"), showNextPrev), _classnames4)),\n        key: \"container\",\n        ref: this.props.saveRef('container')\n      }, prevButton, nextButton, _react.default.createElement(\"div\", {\n        className: \"\".concat(prefixCls, \"-nav-wrap\"),\n        ref: this.props.saveRef('navWrap')\n      }, _react.default.createElement(\"div\", {\n        className: \"\".concat(prefixCls, \"-nav-scroll\")\n      }, _react.default.createElement(\"div\", {\n        className: navClasses,\n        ref: this.props.saveRef('nav')\n      }, navWrapper(this.props.children)))));\n    }\n  }]);\n\n  return ScrollableTabBarNode;\n}(_react.default.Component);\n\nexports.default = ScrollableTabBarNode;\nScrollableTabBarNode.defaultProps = {\n  tabBarPosition: 'left',\n  prefixCls: '',\n  scrollAnimated: true,\n  onPrevClick: function onPrevClick() {},\n  onNextClick: function onNextClick() {},\n  navWrapper: function navWrapper(ele) {\n    return ele;\n  }\n};","map":{"version":3,"sources":["C:/apps/tg-react-client/node_modules/rc-tabs/lib/ScrollableTabBarNode.js"],"names":["Object","defineProperty","exports","value","default","_react","_interopRequireDefault","require","_classnames5","_debounce","_resizeObserverPolyfill","_utils","obj","__esModule","_typeof","Symbol","iterator","constructor","prototype","_defineProperty","key","enumerable","configurable","writable","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","_createClass","protoProps","staticProps","_possibleConstructorReturn","self","call","_assertThisInitialized","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","ReferenceError","_inherits","subClass","superClass","create","_setPrototypeOf","p","ScrollableTabBarNode","_React$Component","_this","prevTransitionEnd","e","propertyName","container","getRef","scrollToActiveTab","currentTarget","activeTab","navWrap","needToSroll","isNextPrevShown","lastNextPrevShown","activeTabWH","getScrollWH","navWrapNodeWH","getOffsetWH","_assertThisInitialize","offset","wrapOffset","getOffsetLT","activeTabOffset","setOffset","prev","onPrevClick","navWrapNode","_assertThisInitialize2","next","onNextClick","_assertThisInitialize3","state","componentDidMount","_this2","componentDidUpdate","debouncedResize","setNextPrev","resizeObserver","observe","prevProps","tabBarPosition","nextPrev","setState","activeKey","componentWillUnmount","disconnect","cancel","navNode","navTabsContainer","navNodeWH","containerWH","minOffset","_this$state","realOffset","setNext","setPrev","node","prop","getBoundingClientRect","checkNextPrev","arguments","undefined","Math","min","navOffset","navStyle","style","transformSupported","isTransform3dSupported","concat","name","direction","setTransform","v","render","_classnames","_classnames2","_classnames3","_classnames4","_this$state2","_this$props","prefixCls","scrollAnimated","navWrapper","prevIcon","nextIcon","showNextPrev","prevButton","createElement","onClick","unselectable","className","onTransitionEnd","nextButton","navClassName","navClasses","ref","saveRef","children","Component","defaultProps","ele"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _classnames5 = _interopRequireDefault(require(\"classnames\"));\n\nvar _debounce = _interopRequireDefault(require(\"lodash/debounce\"));\n\nvar _resizeObserverPolyfill = _interopRequireDefault(require(\"resize-observer-polyfill\"));\n\nvar _utils = require(\"./utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar ScrollableTabBarNode = /*#__PURE__*/function (_React$Component) {\n  _inherits(ScrollableTabBarNode, _React$Component);\n\n  function ScrollableTabBarNode(props) {\n    var _this;\n\n    _classCallCheck(this, ScrollableTabBarNode);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ScrollableTabBarNode).call(this, props));\n\n    _this.prevTransitionEnd = function (e) {\n      if (e.propertyName !== 'opacity') {\n        return;\n      }\n\n      var container = _this.props.getRef('container');\n\n      _this.scrollToActiveTab({\n        target: container,\n        currentTarget: container\n      });\n    };\n\n    _this.scrollToActiveTab = function (e) {\n      var activeTab = _this.props.getRef('activeTab');\n\n      var navWrap = _this.props.getRef('navWrap');\n\n      if (e && e.target !== e.currentTarget || !activeTab) {\n        return;\n      } // when not scrollable or enter scrollable first time, don't emit scrolling\n\n\n      var needToSroll = _this.isNextPrevShown() && _this.lastNextPrevShown;\n\n      _this.lastNextPrevShown = _this.isNextPrevShown();\n\n      if (!needToSroll) {\n        return;\n      }\n\n      var activeTabWH = _this.getScrollWH(activeTab);\n\n      var navWrapNodeWH = _this.getOffsetWH(navWrap);\n\n      var _assertThisInitialize = _assertThisInitialized(_this),\n          offset = _assertThisInitialize.offset;\n\n      var wrapOffset = _this.getOffsetLT(navWrap);\n\n      var activeTabOffset = _this.getOffsetLT(activeTab);\n\n      if (wrapOffset > activeTabOffset) {\n        offset += wrapOffset - activeTabOffset;\n\n        _this.setOffset(offset);\n      } else if (wrapOffset + navWrapNodeWH < activeTabOffset + activeTabWH) {\n        offset -= activeTabOffset + activeTabWH - (wrapOffset + navWrapNodeWH);\n\n        _this.setOffset(offset);\n      }\n    };\n\n    _this.prev = function (e) {\n      _this.props.onPrevClick(e);\n\n      var navWrapNode = _this.props.getRef('navWrap');\n\n      var navWrapNodeWH = _this.getOffsetWH(navWrapNode);\n\n      var _assertThisInitialize2 = _assertThisInitialized(_this),\n          offset = _assertThisInitialize2.offset;\n\n      _this.setOffset(offset + navWrapNodeWH);\n    };\n\n    _this.next = function (e) {\n      _this.props.onNextClick(e);\n\n      var navWrapNode = _this.props.getRef('navWrap');\n\n      var navWrapNodeWH = _this.getOffsetWH(navWrapNode);\n\n      var _assertThisInitialize3 = _assertThisInitialized(_this),\n          offset = _assertThisInitialize3.offset;\n\n      _this.setOffset(offset - navWrapNodeWH);\n    };\n\n    _this.offset = 0;\n    _this.state = {\n      next: false,\n      prev: false\n    };\n    return _this;\n  }\n\n  _createClass(ScrollableTabBarNode, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.componentDidUpdate();\n      this.debouncedResize = (0, _debounce.default)(function () {\n        _this2.setNextPrev();\n\n        _this2.scrollToActiveTab();\n      }, 200);\n      this.resizeObserver = new _resizeObserverPolyfill.default(this.debouncedResize);\n      this.resizeObserver.observe(this.props.getRef('container'));\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var props = this.props;\n\n      if (prevProps && prevProps.tabBarPosition !== props.tabBarPosition) {\n        this.setOffset(0);\n        return;\n      }\n\n      var nextPrev = this.setNextPrev(); // wait next, prev show hide\n\n      /* eslint react/no-did-update-set-state:0 */\n\n      if (this.isNextPrevShown(this.state) !== this.isNextPrevShown(nextPrev)) {\n        this.setState({}, this.scrollToActiveTab);\n      } else if (!prevProps || props.activeKey !== prevProps.activeKey) {\n        // can not use props.activeKey\n        this.scrollToActiveTab();\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.resizeObserver) {\n        this.resizeObserver.disconnect();\n      }\n\n      if (this.debouncedResize && this.debouncedResize.cancel) {\n        this.debouncedResize.cancel();\n      }\n    }\n  }, {\n    key: \"setNextPrev\",\n    value: function setNextPrev() {\n      var navNode = this.props.getRef('nav');\n      var navTabsContainer = this.props.getRef('navTabsContainer');\n      var navNodeWH = this.getScrollWH(navTabsContainer || navNode); // Add 1px to fix `offsetWidth` with decimal in Chrome not correct handle\n      // https://github.com/ant-design/ant-design/issues/13423\n\n      var containerWH = this.getOffsetWH(this.props.getRef('container')) + 1;\n      var navWrapNodeWH = this.getOffsetWH(this.props.getRef('navWrap'));\n      var offset = this.offset;\n      var minOffset = containerWH - navNodeWH;\n      var _this$state = this.state,\n          next = _this$state.next,\n          prev = _this$state.prev;\n\n      if (minOffset >= 0) {\n        next = false;\n        this.setOffset(0, false);\n        offset = 0;\n      } else if (minOffset < offset) {\n        next = true;\n      } else {\n        next = false; // Fix https://github.com/ant-design/ant-design/issues/8861\n        // Test with container offset which is stable\n        // and set the offset of the nav wrap node\n\n        var realOffset = navWrapNodeWH - navNodeWH;\n        this.setOffset(realOffset, false);\n        offset = realOffset;\n      }\n\n      if (offset < 0) {\n        prev = true;\n      } else {\n        prev = false;\n      }\n\n      this.setNext(next);\n      this.setPrev(prev);\n      return {\n        next: next,\n        prev: prev\n      };\n    }\n  }, {\n    key: \"getOffsetWH\",\n    value: function getOffsetWH(node) {\n      var tabBarPosition = this.props.tabBarPosition;\n      var prop = 'offsetWidth';\n\n      if (tabBarPosition === 'left' || tabBarPosition === 'right') {\n        prop = 'offsetHeight';\n      }\n\n      return node[prop];\n    }\n  }, {\n    key: \"getScrollWH\",\n    value: function getScrollWH(node) {\n      var tabBarPosition = this.props.tabBarPosition;\n      var prop = 'scrollWidth';\n\n      if (tabBarPosition === 'left' || tabBarPosition === 'right') {\n        prop = 'scrollHeight';\n      }\n\n      return node[prop];\n    }\n  }, {\n    key: \"getOffsetLT\",\n    value: function getOffsetLT(node) {\n      var tabBarPosition = this.props.tabBarPosition;\n      var prop = 'left';\n\n      if (tabBarPosition === 'left' || tabBarPosition === 'right') {\n        prop = 'top';\n      }\n\n      return node.getBoundingClientRect()[prop];\n    }\n  }, {\n    key: \"setOffset\",\n    value: function setOffset(offset) {\n      var checkNextPrev = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var target = Math.min(0, offset);\n\n      if (this.offset !== target) {\n        this.offset = target;\n        var navOffset = {};\n        var tabBarPosition = this.props.tabBarPosition;\n        var navStyle = this.props.getRef('nav').style;\n        var transformSupported = (0, _utils.isTransform3dSupported)(navStyle);\n\n        if (tabBarPosition === 'left' || tabBarPosition === 'right') {\n          if (transformSupported) {\n            navOffset = {\n              value: \"translate3d(0,\".concat(target, \"px,0)\")\n            };\n          } else {\n            navOffset = {\n              name: 'top',\n              value: \"\".concat(target, \"px\")\n            };\n          }\n        } else if (transformSupported) {\n          if (this.props.direction === 'rtl') {\n            target = -target;\n          }\n\n          navOffset = {\n            value: \"translate3d(\".concat(target, \"px,0,0)\")\n          };\n        } else {\n          navOffset = {\n            name: 'left',\n            value: \"\".concat(target, \"px\")\n          };\n        }\n\n        if (transformSupported) {\n          (0, _utils.setTransform)(navStyle, navOffset.value);\n        } else {\n          navStyle[navOffset.name] = navOffset.value;\n        }\n\n        if (checkNextPrev) {\n          this.setNextPrev();\n        }\n      }\n    }\n  }, {\n    key: \"setPrev\",\n    value: function setPrev(v) {\n      if (this.state.prev !== v) {\n        this.setState({\n          prev: v\n        });\n      }\n    }\n  }, {\n    key: \"setNext\",\n    value: function setNext(v) {\n      if (this.state.next !== v) {\n        this.setState({\n          next: v\n        });\n      }\n    }\n  }, {\n    key: \"isNextPrevShown\",\n    value: function isNextPrevShown(state) {\n      if (state) {\n        return state.next || state.prev;\n      }\n\n      return this.state.next || this.state.prev;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _classnames, _classnames2, _classnames3, _classnames4;\n\n      var _this$state2 = this.state,\n          next = _this$state2.next,\n          prev = _this$state2.prev;\n      var _this$props = this.props,\n          prefixCls = _this$props.prefixCls,\n          scrollAnimated = _this$props.scrollAnimated,\n          navWrapper = _this$props.navWrapper,\n          prevIcon = _this$props.prevIcon,\n          nextIcon = _this$props.nextIcon;\n      var showNextPrev = prev || next;\n\n      var prevButton = _react.default.createElement(\"span\", {\n        onClick: prev ? this.prev : null,\n        unselectable: \"unselectable\",\n        className: (0, _classnames5.default)((_classnames = {}, _defineProperty(_classnames, \"\".concat(prefixCls, \"-tab-prev\"), 1), _defineProperty(_classnames, \"\".concat(prefixCls, \"-tab-btn-disabled\"), !prev), _defineProperty(_classnames, \"\".concat(prefixCls, \"-tab-arrow-show\"), showNextPrev), _classnames)),\n        onTransitionEnd: this.prevTransitionEnd\n      }, prevIcon || _react.default.createElement(\"span\", {\n        className: \"\".concat(prefixCls, \"-tab-prev-icon\")\n      }));\n\n      var nextButton = _react.default.createElement(\"span\", {\n        onClick: next ? this.next : null,\n        unselectable: \"unselectable\",\n        className: (0, _classnames5.default)((_classnames2 = {}, _defineProperty(_classnames2, \"\".concat(prefixCls, \"-tab-next\"), 1), _defineProperty(_classnames2, \"\".concat(prefixCls, \"-tab-btn-disabled\"), !next), _defineProperty(_classnames2, \"\".concat(prefixCls, \"-tab-arrow-show\"), showNextPrev), _classnames2))\n      }, nextIcon || _react.default.createElement(\"span\", {\n        className: \"\".concat(prefixCls, \"-tab-next-icon\")\n      }));\n\n      var navClassName = \"\".concat(prefixCls, \"-nav\");\n      var navClasses = (0, _classnames5.default)((_classnames3 = {}, _defineProperty(_classnames3, navClassName, true), _defineProperty(_classnames3, scrollAnimated ? \"\".concat(navClassName, \"-animated\") : \"\".concat(navClassName, \"-no-animated\"), true), _classnames3));\n      return _react.default.createElement(\"div\", {\n        className: (0, _classnames5.default)((_classnames4 = {}, _defineProperty(_classnames4, \"\".concat(prefixCls, \"-nav-container\"), 1), _defineProperty(_classnames4, \"\".concat(prefixCls, \"-nav-container-scrolling\"), showNextPrev), _classnames4)),\n        key: \"container\",\n        ref: this.props.saveRef('container')\n      }, prevButton, nextButton, _react.default.createElement(\"div\", {\n        className: \"\".concat(prefixCls, \"-nav-wrap\"),\n        ref: this.props.saveRef('navWrap')\n      }, _react.default.createElement(\"div\", {\n        className: \"\".concat(prefixCls, \"-nav-scroll\")\n      }, _react.default.createElement(\"div\", {\n        className: navClasses,\n        ref: this.props.saveRef('nav')\n      }, navWrapper(this.props.children)))));\n    }\n  }]);\n\n  return ScrollableTabBarNode;\n}(_react.default.Component);\n\nexports.default = ScrollableTabBarNode;\nScrollableTabBarNode.defaultProps = {\n  tabBarPosition: 'left',\n  prefixCls: '',\n  scrollAnimated: true,\n  onPrevClick: function onPrevClick() {},\n  onNextClick: function onNextClick() {},\n  navWrapper: function navWrapper(ele) {\n    return ele;\n  }\n};"]},"metadata":{},"sourceType":"script"}